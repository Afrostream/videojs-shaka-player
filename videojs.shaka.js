function setInnerText(e,t){if("undefined"==typeof e)return!1;var n="innerText"in e?"innerText":"textContent";try{e[n]=t}catch(a){e.setAttribute("innerText",t)}}function initMenus(e,t){e.options().playbackRates=[];var n=e.el();n.className+=" vjs-shaka";var a=document.createElement("div");a.setAttribute("class","vjs-shaka-button vjs-menu-button vjs-control vjs-icon-cog"),a.setAttribute("tabindex",0);var s=document.createElement("div");s.setAttribute("class","vjs-control-content"),a.appendChild(s);var i=document.createElement("span");i.setAttribute("class","vjs-control-text"),s.appendChild(i);var l=document.createElement("div");l.setAttribute("class","vjs-menu"),s.appendChild(l),shakaMenuContent=document.createElement("ul"),shakaMenuContent.setAttribute("class","vjs-menu-content"),l.appendChild(shakaMenuContent);for(var o=t.getVideoTracks(),r=0;r<o.length;++r)!function(){var n=r,a=(o[r].bandwidth/1024).toFixed(0),s=document.createElement("li");s.setAttribute("class","vjs-menu-item"),s.setAttribute("data-val",a);var i=document.createElement("span");i.setAttribute("class","vjs-hd-label"),setInnerText(i,a),s.appendChild(i),s.addEventListener("click",function(){var a=shakaMenuContent.querySelector(".vjs-selected");a&&(a.className=a.className.replace("vjs-selected","")),this.className=this.className+" vjs-selected",t.enableAdaptation(!1),t.selectVideoTrack(n,!0),e.trigger("waiting")}),shakaMenuContent.appendChild(s)}();if(e.options().controls){var c=n.querySelectorAll(".vjs-control-bar")[0];c&&c.appendChild(a)}}videojs.Shaka=videojs.Html5.extend({init:function(e,t,n){videojs.Html5.call(this,e,t,n),shaka.polyfill.installAll();var a=document.getElementById("video").getElementsByTagName("video")[0],s=new shaka.player.Player(a),i=new shaka.util.EWMABandwidthEstimator,l=new shaka.player.DashVideoSource(t.source.src,null,i);s.load(l).then(function(){initMenus(e,s)})}}),videojs.Shaka.isSupported=function(){return!!window.MediaSource},videojs.Shaka.canPlaySource=function(e){return"application/dash+xml"===e.type?"maybe":""},videojs.options.techOrder.unshift("shaka");
